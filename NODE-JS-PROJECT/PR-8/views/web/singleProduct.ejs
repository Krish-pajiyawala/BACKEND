<%- include("./header") %>

<div class="container my-5">

    <div class="card shadow-lg border-0 p-4 product-detail-card"
         style="border-radius:20px; background:#ffffff;">

        <div class="row align-items-center g-4">

            <!-- Product Image Section -->
            <div class="col-md-6 text-center position-relative">
                <div class="image-wrapper p-4">
                    <img src="<%= product.productImage %>"
                         class="img-fluid product-image"
                         style="max-height:350px; object-fit:contain;">
                </div>
                
                <!-- Floating badges for offers -->
                <% if(product.productQuantity > 0) { %>
                    <span class="position-absolute top-0 start-0 bg-success text-white px-4 py-2 rounded-pill m-3 shadow-sm stock-badge">
                        <i class="bi bi-check-circle-fill me-1"></i>In Stock
                    </span>
                <% } else { %>
                    <span class="position-absolute top-0 start-0 bg-danger text-white px-4 py-2 rounded-pill m-3 shadow-sm">
                        <i class="bi bi-exclamation-circle-fill me-1"></i>Out of Stock
                    </span>
                <% } %>
                
                <!-- Discount badge if price is high (example) -->
                <% if(product.productPrice > 1000) { %>
                    <span class="position-absolute top-0 end-0 bg-warning text-dark px-4 py-2 rounded-pill m-3 shadow-sm">
                        <i class="bi bi-tag-fill me-1"></i>Special Price
                    </span>
                <% } %>
            </div>

            <!-- Product Details Section -->
            <div class="col-md-6 product-details">

                <!-- Brand with icon -->
                <span class="badge brand-badge mb-3">
                    <i class="bi bi-building me-1"></i>
                    <%= product.brandName %>
                </span>

                <!-- Product Name with gradient -->
                <h2 class="fw-bold mt-2 product-title">
                    <%= product.productName %>
                </h2>

                <!-- Rating stars (example) -->
                <div class="rating mb-3">
                    <i class="bi bi-star-fill text-warning"></i>
                    <i class="bi bi-star-fill text-warning"></i>
                    <i class="bi bi-star-fill text-warning"></i>
                    <i class="bi bi-star-fill text-warning"></i>
                    <i class="bi bi-star-half text-warning"></i>
                    <span class="text-muted ms-2">(4.5/5 - 120 reviews)</span>
                </div>

                <!-- Product Description with nice styling -->
                <div class="description-box bg-light p-4 rounded-4 mb-4">
                    <p class="text-secondary-emphasis mb-0">
                        <i class="bi bi-quote me-2 text-primary"></i>
                        <%= product.productDescription %>
                    </p>
                </div>

                <!-- Key Features (example) -->
                <div class="features mb-4">
                    <div class="row g-2">
                        <div class="col-6">
                            <div class="feature-item">
                                <i class="bi bi-shield-check text-success me-2"></i>
                                <span>1 Year Warranty</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="feature-item">
                                <i class="bi bi-arrow-repeat text-primary me-2"></i>
                                <span>7 Days Return</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="feature-item">
                                <i class="bi bi-truck text-info me-2"></i>
                                <span>Free Shipping</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="feature-item">
                                <i class="bi bi-shield text-warning me-2"></i>
                                <span>Secure Payment</span>
                            </div>
                        </div>
                    </div>
                </div>

                <hr class="my-4">

                <!-- Price Section with Animation -->
                <div class="price-section mb-4">
                    <div class="d-flex align-items-baseline gap-3">
                        <span class="text-muted small">Price:</span>
                        <h3 class="price-tag fw-bold mb-0">
                            ₹ <%= product.productPrice %>
                        </h3>
                        <% if(product.productPrice > 500) { %>
                            <span class="badge bg-danger ms-2">Save ₹<%= Math.floor(product.productPrice * 0.1) %></span>
                        <% } %>
                    </div>
                    
                    <!-- Stock indicator with progress bar -->
                    <div class="stock-indicator mt-3">
                        <div class="d-flex justify-content-between mb-1">
                            <span class="small text-muted">
                                <i class="bi bi-box-seam me-1"></i>Available Stock:
                            </span>
                            <span class="fw-bold <%= product.productQuantity > 10 ? 'text-success' : (product.productQuantity > 5 ? 'text-warning' : 'text-danger') %>">
                                <%= product.productQuantity %> units
                            </span>
                        </div>
                        <div class="progress" style="height: 8px;">
                            <div class="progress-bar <%= product.productQuantity > 10 ? 'bg-success' : (product.productQuantity > 5 ? 'bg-warning' : 'bg-danger') %>" 
                                 role="progressbar" 
                                 style="width: <%= Math.min(100, (product.productQuantity/50)*100) %>%;"
                                 aria-valuenow="<%= product.productQuantity %>" 
                                 aria-valuemin="0" 
                                 aria-valuemax="50">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add to Cart Button with hover effect -->
                <form action="/web/add-to-cart/<%= product._id %>" method="POST" class="mb-4">
                    <button class="btn btn-primary btn-lg w-100 add-to-cart-btn" 
                            <%= product.productQuantity === 0 ? 'disabled' : '' %>>
                        <i class="bi bi-cart-plus me-2"></i>
                        <%= product.productQuantity === 0 ? 'Out of Stock' : 'Add to Cart' %>
                    </button>
                </form>

                <!-- Payment and Delivery Info -->
                <div class="delivery-info bg-light p-3 rounded-3">
                    <div class="d-flex align-items-center gap-4 justify-content-center">
                        <div class="text-center">
                            <i class="bi bi-shield-check text-success fs-4"></i>
                            <div class="small mt-1">Secure Payment</div>
                        </div>
                        <div class="text-center">
                            <i class="bi bi-truck text-primary fs-4"></i>
                            <div class="small mt-1">Fast Delivery</div>
                        </div>
                        <div class="text-center">
                            <i class="bi bi-arrow-repeat text-info fs-4"></i>
                            <div class="small mt-1">Easy Returns</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

</div>

<style>
    /* Custom CSS without JavaScript */
    
    /* Product Detail Card Animation */
    .product-detail-card {
        animation: slideUp 0.6s ease-out;
        position: relative;
        overflow: hidden;
    }
    
    .product-detail-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        animation: shine 3s infinite;
    }
    
    @keyframes shine {
        to {
            left: 200%;
        }
    }
    
    /* Image styling with hover effect */
    .image-wrapper {
        position: relative;
        overflow: hidden;
        border-radius: 15px;
        background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);
    }
    
    .product-image {
        transition: transform 0.5s ease;
        filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1));
    }
    
    .product-image:hover {
        transform: scale(1.05) rotate(2deg);
    }
    
    /* Brand badge styling */
    .brand-badge {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 8px 20px;
        font-size: 0.9rem;
        border-radius: 30px;
        color: white;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }
    
    /* Product title gradient */
    .product-title {
        background: linear-gradient(135deg, #333 0%, #667eea 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-size: 2.2rem;
        margin-bottom: 15px;
    }
    
    /* Description box */
    .description-box {
        border-left: 4px solid #667eea;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    /* Feature items */
    .feature-item {
        padding: 8px 12px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        transition: transform 0.3s ease;
    }
    
    .feature-item:hover {
        transform: translateX(5px);
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }
    
    .feature-item:hover i {
        color: white !important;
    }
    
    /* Price tag styling */
    .price-tag {
        font-size: 2.5rem;
        color: #2c3e50;
        position: relative;
        display: inline-block;
    }
    
    .price-tag::after {
        content: '';
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 100%;
        height: 3px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 2px;
        transform: scaleX(0);
        transform-origin: right;
        transition: transform 0.5s ease;
    }
    
    .price-tag:hover::after {
        transform: scaleX(1);
        transform-origin: left;
    }
    
    /* Add to cart button */
    .add-to-cart-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        padding: 15px;
        font-size: 1.2rem;
        border-radius: 12px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }
    
    .add-to-cart-btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }
    
    .add-to-cart-btn:disabled {
        background: linear-gradient(135deg, #ccc 0%, #999 100%);
        cursor: not-allowed;
    }
    
    /* Stock badge animation */
    .stock-badge {
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    
    /* Rating stars */
    .rating i {
        transition: all 0.3s ease;
    }
    
    .rating:hover i {
        transform: rotate(360deg) scale(1.2);
    }
    
    /* Delivery info icons */
    .delivery-info div {
        transition: transform 0.3s ease;
    }
    
    .delivery-info div:hover {
        transform: translateY(-5px);
    }
    
    /* Progress bar animation */
    .progress-bar {
        transition: width 1s ease;
        position: relative;
        overflow: hidden;
    }
    
    .progress-bar::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        animation: progressShine 2s infinite;
    }
    
    @keyframes progressShine {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }
    
    /* Card slide up animation */
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .product-title {
            font-size: 1.8rem;
        }
        
        .price-tag {
            font-size: 2rem;
        }
        
        .product-image {
            max-height: 250px !important;
        }
        
        .position-absolute {
            font-size: 0.8rem;
            padding: 6px 12px !important;
        }
    }
    
    /* Bootstrap Icons */
    @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css");
    
    /* Custom scrollbar for details section */
    .product-details {
        max-height: 600px;
        overflow-y: auto;
        padding-right: 15px;
    }
    
    .product-details::-webkit-scrollbar {
        width: 5px;
    }
    
    .product-details::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }
    
    .product-details::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 10px;
    }
    
    /* Background pattern */
    body {
        background-image: 
            linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, transparent 50%),
            repeating-linear-gradient(45deg, rgba(118, 75, 162, 0.02) 0px, rgba(118, 75, 162, 0.02) 2px, transparent 2px, transparent 8px);
    }
    
    /* Loading effect for images */
    .product-image {
        animation: fadeIn 0.8s ease;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }
</style>

</body>
</html>